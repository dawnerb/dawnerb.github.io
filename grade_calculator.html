<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Astronomy 103 Grade Calculator</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #070b14;
    --surface: #141e30;
    --border: #2a3f5f;
    --accent: #4f8ef7;
    --accent2: #a78bfa;
    --text: #f1f5f9;
    --muted: #94a3b8;
    --star: #fbbf24;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Syne', sans-serif;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    overflow-x: hidden;
  }

  /* starfield */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      radial-gradient(1px 1px at 10% 20%, rgba(255,255,255,0.6) 0%, transparent 100%),
      radial-gradient(1px 1px at 25% 60%, rgba(255,255,255,0.4) 0%, transparent 100%),
      radial-gradient(1px 1px at 40% 10%, rgba(255,255,255,0.5) 0%, transparent 100%),
      radial-gradient(1px 1px at 55% 80%, rgba(255,255,255,0.3) 0%, transparent 100%),
      radial-gradient(1px 1px at 70% 35%, rgba(255,255,255,0.6) 0%, transparent 100%),
      radial-gradient(1px 1px at 85% 70%, rgba(255,255,255,0.4) 0%, transparent 100%),
      radial-gradient(1px 1px at 15% 85%, rgba(255,255,255,0.5) 0%, transparent 100%),
      radial-gradient(1px 1px at 90% 15%, rgba(255,255,255,0.3) 0%, transparent 100%),
      radial-gradient(1.5px 1.5px at 33% 45%, rgba(255,255,255,0.5) 0%, transparent 100%),
      radial-gradient(1.5px 1.5px at 66% 55%, rgba(255,255,255,0.4) 0%, transparent 100%),
      radial-gradient(1px 1px at 48% 90%, rgba(255,255,255,0.6) 0%, transparent 100%),
      radial-gradient(1px 1px at 78% 5%, rgba(255,255,255,0.4) 0%, transparent 100%);
    pointer-events: none;
    z-index: 0;
  }

  .container {
    position: relative;
    z-index: 1;
    width: 100%;
    max-width: 600px;
  }

  header {
    text-align: center;
    margin-bottom: 2.5rem;
  }

  .orbit-icon {
    font-size: 2.5rem;
    display: block;
    margin-bottom: 0.5rem;
    animation: spin 20s linear infinite;
  }

  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  h1 {
    font-size: 1.9rem;
    font-weight: 800;
    letter-spacing: -0.02em;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1.1;
  }

  .subtitle {
    color: var(--muted);
    font-family: 'Space Mono', monospace;
    font-size: 0.75rem;
    margin-top: 0.4rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }

  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 2rem;
    margin-bottom: 1.5rem;
    position: relative;
    overflow: hidden;
  }

  .card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    border-radius: 16px 16px 0 0;
  }

  .card-title {
    font-size: 0.7rem;
    font-family: 'Space Mono', monospace;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 1.25rem;
  }

  .grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }

  .field {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
  }

  label {
    font-size: 0.82rem;
    color: var(--muted);
    font-family: 'Space Mono', monospace;
  }

  .label-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .label-tag {
    font-size: 0.65rem;
    background: rgba(79,142,247,0.15);
    color: var(--accent);
    padding: 1px 6px;
    border-radius: 4px;
    font-family: 'Space Mono', monospace;
  }

  input[type="number"] {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text);
    font-family: 'Space Mono', monospace;
    font-size: 1.1rem;
    padding: 0.6rem 0.75rem;
    width: 100%;
    transition: border-color 0.2s, box-shadow 0.2s;
    -moz-appearance: textfield;
  }

  input[type="number"]::-webkit-outer-spin-button,
  input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; }

  input[type="number"]:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(79,142,247,0.15);
  }

  .section-header {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    margin-bottom: 1rem;
  }

  .section-dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    background: var(--accent);
    flex-shrink: 0;
  }

  .section-label {
    font-size: 0.9rem;
    font-weight: 700;
    letter-spacing: 0.02em;
  }

  .progress-bar-wrap {
    background: var(--bg);
    border-radius: 4px;
    height: 4px;
    margin-top: 0.35rem;
    overflow: hidden;
  }

  .progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    border-radius: 4px;
    width: 0%;
    transition: width 0.4s ease;
  }

  button {
    width: 100%;
    padding: 1rem;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    border: none;
    border-radius: 12px;
    color: #fff;
    font-family: 'Syne', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    letter-spacing: 0.05em;
    cursor: pointer;
    transition: opacity 0.2s, transform 0.15s;
    text-transform: uppercase;
  }

  button:hover { opacity: 0.9; transform: translateY(-1px); }
  button:active { transform: translateY(0); }

  #result {
    display: none;
    text-align: center;
    padding: 2rem;
  }

  .grade-display {
    font-size: 5rem;
    font-weight: 800;
    line-height: 1;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: pop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  @keyframes pop {
    from { transform: scale(0.5); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  .grade-label {
    font-family: 'Space Mono', monospace;
    font-size: 0.75rem;
    letter-spacing: 0.15em;
    color: var(--muted);
    text-transform: uppercase;
    margin-top: 0.5rem;
  }

  .breakdown {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
    margin-top: 1.5rem;
  }

  .breakdown-item {
    background: var(--bg);
    border-radius: 10px;
    padding: 0.75rem;
    border: 1px solid var(--border);
  }

  .breakdown-name {
    font-size: 0.65rem;
    font-family: 'Space Mono', monospace;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }

  .breakdown-value {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--text);
    margin-top: 0.2rem;
  }

  .breakdown-pct {
    font-size: 0.75rem;
    color: var(--accent);
    font-family: 'Space Mono', monospace;
  }

  .error-msg {
    background: rgba(239,68,68,0.1);
    border: 1px solid rgba(239,68,68,0.3);
    border-radius: 8px;
    color: #fca5a5;
    font-size: 0.85rem;
    padding: 0.75rem 1rem;
    margin-top: 1rem;
    display: none;
    font-family: 'Space Mono', monospace;
  }
</style>
</head>
<body>
<div class="container">
  <header>
    <span class="orbit-icon">ü™ê</span>
    <h1>Grade Calculator</h1>
    <p class="subtitle">Astronomy 103 ¬∑ Spring 2026</p>
  </header>

  <div class="card">
    <p class="card-title">// enter your scores</p>

    <!-- Activities -->
    <div class="section-header" style="margin-bottom:0.75rem">
      <div class="section-dot"></div>
      <span class="section-label">Activities</span>
    </div>
    <div class="grid" style="margin-bottom:1.5rem">
      <div class="field">
        <div class="label-row">
          <label>Completed</label>
          <span class="label-tag">done</span>
        </div>
        <input type="number" id="a_completed" min="0" value="7" oninput="updateBar('a')">
        <div class="progress-bar-wrap"><div class="progress-bar" id="bar_a"></div></div>
      </div>
      <div class="field">
        <div class="label-row">
          <label>Possible so far</label>
          <span class="label-tag">max</span>
        </div>
        <input type="number" id="a_possible" min="1" value="8" oninput="updateBar('a')">
      </div>
    </div>

    <!-- Reflections -->
    <div class="section-header" style="margin-bottom:0.75rem">
      <div class="section-dot" style="background:var(--accent2)"></div>
      <span class="section-label">Reflections</span>
    </div>
    <div class="grid" style="margin-bottom:1.5rem">
      <div class="field">
        <div class="label-row">
          <label>Completed</label>
          <span class="label-tag">done</span>
        </div>
        <input type="number" id="r_completed" min="0" value="4" oninput="updateBar('r')">
        <div class="progress-bar-wrap"><div class="progress-bar" id="bar_r"></div></div>
      </div>
      <div class="field">
        <div class="label-row">
          <label>Possible so far</label>
          <span class="label-tag">max</span>
        </div>
        <input type="number" id="r_possible" min="1" value="4" oninput="updateBar('r')">
      </div>
    </div>

    <!-- Project -->
    <div class="section-header" style="margin-bottom:0.75rem">
      <div class="section-dot" style="background:var(--star)"></div>
      <span class="section-label">Project</span>
    </div>
    <div class="grid" style="margin-bottom:1.5rem">
      <div class="field">
        <div class="label-row">
          <label>Completed</label>
          <span class="label-tag">done</span>
        </div>
        <input type="number" id="p_completed" min="0" value="1" oninput="updateBar('p')">
        <div class="progress-bar-wrap"><div class="progress-bar" id="bar_p"></div></div>
      </div>
      <div class="field">
        <div class="label-row">
          <label>Possible so far</label>
          <span class="label-tag">max</span>
        </div>
        <input type="number" id="p_possible" min="1" value="1" oninput="updateBar('p')">
      </div>
    </div>

    <!-- Learning Targets -->
    <div class="section-header" style="margin-bottom:0.75rem">
      <div class="section-dot" style="background:#34d399"></div>
      <span class="section-label">Learning Targets</span>
    </div>
    <div class="grid">
      <div class="field">
        <div class="label-row">
          <label>Completed</label>
          <span class="label-tag">done</span>
        </div>
        <input type="number" id="t_completed" min="0" value="12" oninput="updateBar('t')">
        <div class="progress-bar-wrap"><div class="progress-bar" id="bar_t"></div></div>
      </div>
      <div class="field">
        <div class="label-row">
          <label>Possible so far</label>
          <span class="label-tag">max</span>
        </div>
        <input type="number" id="t_possible" min="1" value="12" oninput="updateBar('t')">
      </div>
    </div>

    <div class="error-msg" id="error"></div>
  </div>

  <button onclick="calculate()">‚ö° Calculate My Grade</button>

  <div class="card" id="result">
    <p class="card-title">// estimated current grade</p>
    <div class="grade-display" id="grade-out"></div>
    <p class="grade-label">Current Standing</p>
    <div class="breakdown" id="breakdown"></div>
  </div>
</div>

<script>
  // Grade scale data (from CSV)
  // Row 0 is the max possible (no letter grade)
  const gradeScale = [
    { grade: null,  a: 22, r: 22, p: 3, t: 25 },
    { grade: 'A',   a: 19, r: 19, p: 3, t: 22 },
    { grade: 'A-',  a: 18, r: 18, p: 3, t: 21 },
    { grade: 'B+',  a: 17, r: 17, p: 3, t: 20 },
    { grade: 'B',   a: 16, r: 16, p: 2, t: 19 },
    { grade: 'B-',  a: 15, r: 15, p: 2, t: 18 },
    { grade: 'C+',  a: 14, r: 14, p: 2, t: 17 },
    { grade: 'C',   a: 13, r: 13, p: 2, t: 16 },
    { grade: 'C-',  a: 12, r: 12, p: 2, t: 15 },
    { grade: 'D+',  a: 11, r: 11, p: 1, t: 14 },
    { grade: 'D',   a: 11, r: 11, p: 1, t: 13 },
    { grade: 'D-',  a: 11, r: 11, p: 1, t: 12 },
  ];

  // Normalize each column by dividing by row[0] value
  const maxA = gradeScale[0].a, maxR = gradeScale[0].r,
        maxP = gradeScale[0].p, maxT = gradeScale[0].t;

  const normalized = gradeScale.map(row => ({
    grade: row.grade,
    a: row.a / maxA,
    r: row.r / maxR,
    p: row.p / maxP,
    t: row.t / maxT,
  }));

  function updateBar(key) {
    const completed = parseFloat(document.getElementById(key + '_completed').value) || 0;
    const possible  = parseFloat(document.getElementById(key + '_possible').value)  || 1;
    const pct = Math.min(100, Math.max(0, (completed / possible) * 100));
    document.getElementById('bar_' + key).style.width = pct + '%';
  }

  // Init bars
  ['a','r','p','t'].forEach(updateBar);

  function getVal(id) { return parseFloat(document.getElementById(id).value); }

  function calculate() {
    const err = document.getElementById('error');
    err.style.display = 'none';

    const ac = getVal('a_completed'), ap = getVal('a_possible');
    const rc = getVal('r_completed'), rp = getVal('r_possible');
    const pc = getVal('p_completed'), pp = getVal('p_possible');
    const tc = getVal('t_completed'), tp = getVal('t_possible');

    if ([ac,ap,rc,rp,pc,pp,tc,tp].some(v => isNaN(v) || v < 0)) {
      err.textContent = '‚ö† Please enter valid non-negative numbers in all fields.';
      err.style.display = 'block';
      return;
    }
    if ([ap,rp,pp,tp].some(v => v <= 0)) {
      err.textContent = '‚ö† "Possible so far" values must be greater than zero.';
      err.style.display = 'block';
      return;
    }

    const aFrac = ac / ap, rFrac = rc / rp,
          pFrac = pc / pp, tFrac = tc / tp;

    const fRow = normalized[11]; // D- row (last = failing boundary)
    let grade;

    if (aFrac < fRow.a || rFrac < fRow.r || pFrac < fRow.p || tFrac < fRow.t) {
      grade = 'F';
    } else {
      // Find index where fraction >= normalized threshold (rows 1-11)
      const aIdx = normalized.slice(1, 12).findIndex(r => aFrac >= r.a);
      const rIdx = normalized.slice(1, 12).findIndex(r => rFrac >= r.r);
      const pIdx = normalized.slice(1, 12).findIndex(r => pFrac >= r.p);
      const tIdx = normalized.slice(1, 12).findIndex(r => tFrac >= r.t);

      // The worst category determines the grade (highest index = lower grade)
      const worstIdx = Math.max(aIdx, rIdx, pIdx, tIdx);
      grade = normalized[worstIdx + 1].grade;
    }

    // Display result
    const resultEl = document.getElementById('result');
    resultEl.style.display = 'block';
    resultEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

    const gradeOut = document.getElementById('grade-out');
    gradeOut.textContent = grade;
    // Re-trigger animation
    gradeOut.style.animation = 'none';
    gradeOut.offsetHeight;
    gradeOut.style.animation = '';

    // Color the grade by level
    const colors = {
      'A': '#4ade80', 'A-': '#4ade80',
      'B+': '#60a5fa', 'B': '#60a5fa', 'B-': '#60a5fa',
      'C+': '#a78bfa', 'C': '#a78bfa', 'C-': '#a78bfa',
      'D+': '#fb923c', 'D': '#fb923c', 'D-': '#fb923c',
      'F': '#f87171'
    };
    const c = colors[grade] || '#4f8ef7';
    gradeOut.style.background = `linear-gradient(135deg, ${c}, ${c}aa)`;
    gradeOut.style.webkitBackgroundClip = 'text';
    gradeOut.style.backgroundClip = 'text';

    document.getElementById('breakdown').innerHTML = `
      <div class="breakdown-item">
        <div class="breakdown-name">Activities</div>
        <div class="breakdown-value">${ac} / ${ap}</div>
        <div class="breakdown-pct">${(aFrac*100).toFixed(1)}%</div>
      </div>
      <div class="breakdown-item">
        <div class="breakdown-name">Reflections</div>
        <div class="breakdown-value">${rc} / ${rp}</div>
        <div class="breakdown-pct">${(rFrac*100).toFixed(1)}%</div>
      </div>
      <div class="breakdown-item">
        <div class="breakdown-name">Project</div>
        <div class="breakdown-value">${pc} / ${pp}</div>
        <div class="breakdown-pct">${(pFrac*100).toFixed(1)}%</div>
      </div>
      <div class="breakdown-item">
        <div class="breakdown-name">Learning Targets</div>
        <div class="breakdown-value">${tc} / ${tp}</div>
        <div class="breakdown-pct">${(tFrac*100).toFixed(1)}%</div>
      </div>
    `;
  }
</script>
</body>
</html>
